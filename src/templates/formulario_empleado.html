<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Empleado</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/formulario_empleado.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body> 
    <div class="form-container">
        <form id="empleadoForm" action="{{ url_for('guardar_empleado') }}" method="POST">

            <div class="form-grid">
                <!-- Sección 1: Información Personal -->
                <div class="form-section">
                    <h2><i class="fas fa-id-card"></i> Información Personal</h2>

                    <div class="form-group">
                        <label for="Nombre">Nombre(s)*</label>
                        <input type="text" id="Nombre" name="Nombre" required maxlength="25" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ\s]+" title="Solo letras y espacios">
                    </div>

                    <div class="form-group">
                        <label for="Apellido_p">Apellido Paterno*</label>
                        <input type="text" id="Apellido_p" name="Apellido_p" required maxlength="20" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ]+" title="Solo letras">
                    </div>

                    <div class="form-group">
                        <label for="Apellido_M">Apellido Materno</label>
                        <input type="text" id="Apellido_M" name="Apellido_M" maxlength="20" pattern="[A-Za-záéíóúÁÉÍÓÚñÑ]+" title="Solo letras">
                    </div>

                    <div class="form-group">
                        <label for="Fecha_Nacimiento">Fecha de Nacimiento*</label>
                        <input type="date" id="Fecha_Nacimiento" name="Fecha_Nacimiento" required>
                    </div>

                    <div class="form-group">
                        <label for="Genero">Género*</label>
                        <select id="Genero" name="Genero" required>
                            <option value="">Seleccionar...</option>
                            <option value="Masculino">Masculino</option>
                            <option value="Femenino">Femenino</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>
                </div>

                <!-- Sección 2: Contacto y Acceso -->
                <div class="form-section">
                    <h2><i class="fas fa-envelope"></i> Contacto y Acceso</h2>

                    <div class="form-group">
                        <label for="Correo">Correo Electrónico*</label>
                        <input type="email" id="Correo" name="Correo" required maxlength="30" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                    </div>

                    <div class="form-group">
                        <label for="Telefono">Teléfono</label>
                        <input type="tel" id="Telefono" name="Telefono" pattern="[0-9]{10}" maxlength="10" title="10 dígitos numéricos">
                    </div>

                    <div class="form-group">
                        <label for="Contrasena">Contraseña*</label>
                        <div class="password-container">
                            <input type="password" id="Contrasena" name="Contrasena" required maxlength="12" minlength="6"
                                   pattern="^(?=.*[A-Za-z])(?=.*\d).{6,12}$"
                                   title="6-12 caracteres, al menos una letra y un número">
                            <i class="fas fa-eye toggle-password" onclick="togglePassword('Contrasena')"></i>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="Confirmar_Contrasena">Confirmar Contraseña*</label>
                        <div class="password-container">
                            <input type="password" id="Confirmar_Contrasena" name="Confirmar_Contrasena" required maxlength="12" minlength="6">
                            <i class="fas fa-eye toggle-password" onclick="togglePassword('Confirmar_Contrasena')"></i>
                        </div>
                        <div class="error-message" id="password-error"></div>
                    </div>
                </div>

                <!-- Sección 3: Laboral -->
                <div class="form-section">
                    <h2><i class="fas fa-briefcase"></i> Datos Laborales</h2>

                    <!-- Sucursal -->
                    <div class="form-group">
                        <label for="Sucursal_ID"><i class="fas fa-store"></i> Sucursal *</label>
                        <select name="Sucursal_ID" id="Sucursal_ID" required>
                            <option value="">Seleccione una sucursal</option>
                            {% for sucursal in sucursales %}
                            <option value="{{ sucursal.ID }}">{{ sucursal.Nombre }}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <!-- Rol -->
                    <div class="form-group">
                        <label for="rol">Rol:</label>
                        <select name="rol_id" id="rol" required>
                            <option value="">Seleccione un rol</option>
                            {% for rol in roles %}
                                <option value="{{ rol.ID }}" {% if empleado and empleado['Rol_ID'] == rol.ID %}selected{% endif %}>
                                    {{ rol.Nombre }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="Estatus">Estatus</label>
                        <select id="Estatus" name="Estatus">
                            <option value="Activo" selected>Activo</option>
                            <option value="Inactivo">Inactivo</option>
                            <option value="Suspendido">Suspendido</option>
                            <option value="Vacaciones">Vacaciones</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="Salario">Salario</label>
                        <input type="number" name="Salario" id="Salario" step="0.01" min="0" placeholder="0.00">
                    </div>

                    <div class="form-group">
                        <label for="Tipo_Contrato">Tipo de Contrato</label>
                        <select id="Tipo_Contrato" name="Tipo_Contrato">
                            <option value="">Seleccione</option>
                            <option value="Tiempo Completo">Tiempo Completo</option>
                            <option value="Medio Tiempo">Medio Tiempo</option>
                            <option value="Temporal">Temporal</option>
                            <option value="Por Horas">Por Horas</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="Fecha_Contratacion">Fecha de Contratación*</label>
                        <input type="date" id="Fecha_Contratacion" name="Fecha_Contratacion" required>
                    </div>

                    <div class="form-group">
                        <label for="Fecha_Terminacion">Fecha de Terminación</label>
                        <input type="date" id="Fecha_Terminacion" name="Fecha_Terminacion">
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="window.history.back()">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Guardar Empleado
                </button>
            </div>
        </form>
    </div>

    <script src="{{ url_for('static', filename='js/formulario_empleado.js') }}"></script>
</body>
</html>
